Inhalt fÃ¼r web-pentesting/race-conditions.md

# ğŸ Race Conditions

Race Conditions treten auf, wenn mehrere Prozesse gleichzeitig auf dieselbe Ressource zugreifen â€“ und dadurch SicherheitslÃ¼cken entstehen.

---

## ğŸ§  Was ist eine Race Condition?

Ein System prÃ¼ft z.â€¯B. Berechtigungen, bevor es etwas ausfÃ¼hrt.  
Wenn zwischen â€PrÃ¼fenâ€œ und â€AusfÃ¼hrenâ€œ ein Zeitfenster liegt, kann ein Angreifer versuchen, das Verhalten zu beeinflussen.

### ğŸ”„ Beispiel: TOCTOU (Time Of Check To Time Of Use)

1. System prÃ¼ft, ob Datei X sicher ist
2. Kurz darauf fÃ¼hrt es X aus

Angreifer: Tauscht in Millisekunden Datei X gegen etwas BÃ¶ses aus

---

## ğŸ¯ Angriffsziele

- SicherheitsprÃ¼fung umgehen
- Datei-Upload manipulieren
- Admin-Rechte eskalieren
- Zwei-Bestellungen (z.â€¯B. doppelte Coupons)
- Mehrfach-Abheben vom Konto

---

## ğŸ”§ Techniken

### ğŸ”¹ Multi-Request Angriffe

- Sende 20x denselben Request gleichzeitig
- Ziel: Wettbewerb zwischen Threads auf Server

Beispiel:
```bash
ffuf -X POST -d 'coupon=FREE50' -H "Content-Type: application/x-www-form-urlencoded" -w payloads.txt -u http://target.com/redeem

ğŸ”¹ curl mit ParallelitÃ¤t

for i in {1..20}; do curl -X POST http://target.com/redeem & done

ğŸ”¹ Upload-Race (Datei wird wÃ¤hrend des Scans ersetzt)

    Harmloses Bild hochladen

    In Sekunde zwischen â€Uploadâ€œ und â€Moveâ€œ die Datei durch PHP/Webshell ersetzen

ğŸ§ª Tools
Tool	Zweck
Burp Suite	Manuelles und paralleles Testing
Intruder (Turbo)	Multi-Thread Test
Turbo Intruder	Hochperformanter Parallelfuzzer
ffuf	Simpler CLI-basierter Angriff
ğŸ›¡ï¸ SchutzmaÃŸnahmen

    Sperren von Ressourcen bei PrÃ¼fung

    Atomares Schreiben / Transaktionen

    Mehrfache PrÃ¼fungen statt nur vor AusfÃ¼hrung

    Rate-Limiting und Logging
